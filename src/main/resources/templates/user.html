<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Marketboro Admin Page</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script th:inline="javascript">
  $( document ).ready( function() {
    $("#search").click(function(){
      location.href = "/user/list?page=1&name=" + $("#userName").val();
    });

    $(".page").click(function(event){
      location.href = "/user/list?page=" + $(event.target).html() + "&name=" + $("#userName").val();
    });

    $("#fristPage").click(function(event){
      location.href = "/user/list?page=1&name=" + $("#userName").val();
    });

    $("#lsatPage").click(function(event){
      let last = /*[[ ${allcnt / 5 + 1} ]]*/;
      location.href = "/user/list?page=" + last + "&name=" + $("#userName").val();
    });
  });
</script>
<body>

<h1>Marketboro Admin Page</h1>
<h2>유저 리스트 화면</h2>
<a href="/login?logout">로그아웃</a>
<input type="text" name="name" id="userName" th:value="${findName}"/> <button id="search">조회</button>

<h1 th:text="${allcnt}">건</h1>
<h1 th:text="${page}"></h1>

<table class="table">
  <thead>
    <tr>
      <th>id</th>
      <th>이름</th>
      <th>권한</th>
      <th>연락처</th>
      <th>가입일</th>
      <th>수정일</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="member : ${members}">
      <td th:text="${member.id}"></td>
      <td th:text="${member.name}"></td>
      <td th:text="${member.auth}"></td>
      <td th:text="${member.contractNumber}"></td>
      <td th:text="${member.createDatetime}"></td>
      <td th:text="${member.updateDatetime}"></td>
    </tr>
  </tbody>
</table>
<ul class="pagination">
  <li>
    <a id="fristPage">시작</a>
  </li>
  <li th:each="m : ${#numbers.sequence(0 , allcnt / 5)}" >
    <a class="page" th:text="${m+1}"></a>
  </li>
  <li>
    <a id="lsatPage">종료</a>
  </li>
</ul>
</body>
</html>